@startuml class
left to right direction
skinparam linetype ortho
skinparam ArrowFontSize 10

class User {
  +ID: uint
  +firstName: string
  +lastName: string
  +email: string
  +password: string
  +phoneNumber: string
  +accountActivationHash: string
  +isActive: boolean
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class Admin {
  +manageUsers()
  +overseeSystem()
  +monitorProcesses()
}

class Entrepreneur {
  +reputation: float
  +submitProposal()
  +viewOffers()
}

class TenderAdministrator {
  +name: string
  +createOffer()
  +manageOffers()
}

' Expanded Expert class to include additional proof-of-stake properties
class Expert {
  +specialization: string
  +stakeAmount: float
  +stakeWeight: float
  +nodeReputation: float
  +yearsExperience: int
  +nodeID: string
  +evaluateProposal()
  +updateStake(amount: float)
  +calculateStakeWeight(): float
  +updateReputation(score: float)
}

class Role {
  +ID: uint
  +name: string
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class Offer {
  +ID: uint
  +title: string
  +description: string
  +budget: float
  +currency: string
  +category: string
  +location: string
  +bidDeadline: time.Time
  +contractStart: time.Time
  +status: string
  +winningProposalID: uint
  +createdBy: uint
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

' Updated Proposal class based on Algerian public tender practices
class Proposal {
  +ID: uint
  +offerID: uint
  +entrepreneurID: uint
  +technicalProposal: string     
  +financialOffer: float         
  +timeline: string              
  +requiredManpower: int         
  +bidBondAmount: float            
  +pastExperience: string          
  +status: string
  +submittedAt: time.Time
  +finalScore: float
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class POSVote {
  +ID: uint
  +proposalID: uint
  +expertID: uint
  +voteScore: float
  +comments: string
  +weight: float
  +evaluatedAt: time.Time
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class Document {
  +ID: uint
  +name: string
  +url: string
  +documentableID: uint
  +documentableType: string
  +size: int
  +fileType: string
  +uploadedBy: uint
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class OfferRules {
  +ID: uint
  +name: string
  +description: string
  +createdAt: time.Time
  +updatedAt: time.Time
  +deletedAt: time.Time
}

class SmartContract {
  +ID: uint
  +offerID: uint
  +entrepreneurID: uint
  +terms: string
  +contractAddress: string
  +status: string
  +createdAt: time.Time
  +updatedAt: time.Time
}

User <|-- Admin
User <|-- Entrepreneur
User <|-- TenderAdministrator
User <|-- Expert

User "*" -- "*" Role

TenderAdministrator "1" -- "*" Offer : creates
Entrepreneur "1" -- "*" Proposal : submits
Offer "1" -- "*" Proposal : receives
Expert "1" -- "*" POSVote : casts
Proposal "1" -- "*" POSVote : evaluatedBy

Offer "1" -- "0..1" SmartContract : resultsIn
Entrepreneur "1" -- "0..1" SmartContract : signs

Offer "*" -- "*" OfferRules
Document "*" -- "1" Offer : attachedTo
Document "*" -- "1" Proposal : attachedTo
Document "*" -- "1" User : uploadedBy

@enduml
